import pcapy
from scapy.all import *

def capture_network_traffic(interface, packet_count):
    try:
        # Open the network interface for capturing
        cap = pcapy.open_live(interface, 65536, 1, 0)

        print(f"Capturing {packet_count} packets on interface {interface}...")

        # Set a packet filter (you can customize this as needed)
        cap.setfilter("tcp port 80")

        packet_num = 0

        while packet_num < packet_count:
            packet_num += 1
            header, packet = cap.next()
            
            # Use Scapy to parse the packet
            scapy_packet = Ether(packet)
            
            # Process the packet as needed
            print(f"Packet #{packet_num}: {scapy_packet.summary()}")

    except Exception as e:
        print(f"An error occurred: {str(e)}")

if __name__ == "__main__":
    interface = "eth0"  # Replace with the network interface you want to capture on
    packet_count = 10   # Number of packets to capture

    capture_network_traffic(interface, packet_count)
